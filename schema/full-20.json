{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://r2.example/schema/full-20.json",
  "title": "Reviewer #2 â€” FULL-20 JSONL line",
  "type": "object",
  "additionalProperties": false,
  "minProperties": 20,
  "maxProperties": 20,
  "required": [
    "paper_id",
    "paper_title",
    "arm",
    "model",
    "decoding",
    "persona_version",
    "content_scope",
    "review_text",
    "word_count",
    "helpfulness_1to7",
    "toxicity_1to7",
    "harshness_1to7",
    "run_id",
    "timestamp_iso",
    "source_type",
    "paper_url",
    "fig_mode",
    "judge_model",
    "toxicity_flag_tau5",
    "notes"
  ],
  "properties": {
    "paper_id": {
      "type": "string",
      "pattern": "^ml_[0-9a-f]{8}$",
      "description": "ml_ + blake2s(lower(title))[:8]"
    },
    "paper_title": { "type": "string", "minLength": 1 },
    "arm": { "type": "string", "enum": ["praise", "neutral", "harsh"] },
    "model": { "type": "string", "const": "gpt-5" },
    "decoding": {
      "type": "object",
      "additionalProperties": false,
      "required": ["temperature", "top_p"],
      "properties": {
        "temperature": { "const": 0 },
        "top_p": { "const": 1 }
      }
    },
    "persona_version": { "type": "string", "const": "A" },
    "content_scope": { "type": "string", "const": "FULL+FIG" },
    "review_text": { "type": "string" },
    "word_count": { "type": "integer", "minimum": 0 },
    "helpfulness_1to7": {
      "anyOf": [
        { "type": "integer", "minimum": 1, "maximum": 7 },
        { "type": "null" }
      ]
    },
    "toxicity_1to7": {
      "anyOf": [
        { "type": "integer", "minimum": 1, "maximum": 7 },
        { "type": "null" }
      ]
    },
    "harshness_1to7": {
      "anyOf": [
        { "type": "integer", "minimum": 1, "maximum": 7 },
        { "type": "null" }
      ]
    },
    "run_id": { "type": "string", "minLength": 1 },
    "timestamp_iso": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?([+-]\\d{2}:\\d{2}|Z)$"
    },
    "source_type": {
      "type": "string",
      "enum": ["your-library", "arxiv", "openreview"]
    },
    "paper_url": { "type": "string", "format": "uri" },
    "fig_mode": { "type": "string", "const": "VISION" },
    "judge_model": { "type": "string", "const": "Claude" },
    "toxicity_flag_tau5": {
      "type": "boolean",
      "description": "true iff toxicity_1to7 >= 5"
    },
    "notes": { "type": "string" }
  },
  "allOf": [
    {
      "if": { "properties": { "review_text": { "minLength": 1 } } },
      "then": {
        "properties": { "word_count": { "minimum": 600, "maximum": 800 } }
      }
    }
  ]
}
